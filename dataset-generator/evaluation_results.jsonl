{"schema_id": "work_funnel_v1", "query": "Show me high priority tasks for the Launch team over the next 1 weeks", "target_valid": true, "raw_output": "{\n  \"prompt\": \"Show me high priority tasks for the Launch team over the next 1 week\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"task.priority\",\n          \"operator\": \"gt\",\n          \"value\": \"Low\"\n        },\n        {\n          \"field\": \"task.status\",\n          \"operator\": \"lt\",\n          \"value\": \"Medium\"\n        },\n        {\n          \"field\": \"task.name\",\n          \"operator\": \"gt\",\n          \"value\": \"Unknown\"\n        }\n      ],\n      \"description\": \"Unknown\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"task.status\",\n          \"operator\": \"lt\",\n          \"value\": \"Medium\"\n        },\n        {\n          \"field\": \"task.priority\",\n          \"operator\": \"gt\",\n          \"value\": \"High\"\n        },\n        {\n          \"field\": \"task.name\",\n          \"operator\": \"lt\",\n          \"value\": \"Unknown\"\n        }\n      ],", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"work_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"Schema for capturing work task attributes in a funnel-style workflow.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.team\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Launch\",\n                            \"description\": \"Launch track\"\n                          },\n                          {\n                            \"const\": \"Build\",\n                            \"description\": \"Build track\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"task.status\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"ToDo\",\n                            \"description\": \"To do\"\n                          },\n                          {\n                            \"const\": \"InProgress\",\n                            \"description\": \"In progress\"\n                          },\n                          {\n                            \"const\": \"Done\",\n                            \"description\": \"Done\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"task.priority\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Low\",\n                            \"description\": \"Low priority\"\n                          },\n                          {\n                            \"const\": \"Medium\",\n                            \"description\": \"Medium priority\"\n                          },\n                          {\n                            \"const\": \"High\",\n                            \"description\": \"High priority\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"task.type\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Feature\",\n                            \"description\": \"New feature\"\n                          },\n                          {\n                            \"const\": \"Bug\",\n                            \"description\": \"Bug fix\"\n                          },\n                          {\n                            \"const\": \"Chore\",\n                            \"description\": \"Maintenance\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"ec.team\",\n                      \"description\": \"High-level team or track.\"\n                    },\n                    {\n                      \"const\": \"task.status\",\n                      \"description\": \"Current status of the task.\"\n                    },\n                    {\n                      \"const\": \"task.priority\",\n                      \"description\": \"Urgency level.\"\n                    },\n                    {\n                      \"const\": \"project.name\",\n                      \"description\": \"Name of the project.\"\n                    },\n                    {\n                      \"const\": \"task.type\",\n                      \"description\": \"Kind of work.\"\n                    },\n                    {\n                      \"const\": \"task.owner\",\n                      \"description\": \"Assigned user.\"\n                    },\n                    {\n                      \"const\": \"deadline\",\n                      \"description\": \"Due date in ISO format.\"\n                    },\n                    {\n                      \"const\": \"effort.estimation\",\n                      \"description\": \"Estimated effort in story points.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"gt\",\n                      \"description\": \"Field must be greater than the provided value (lexicographic / numeric / date).\"\n                    },\n                    {\n                      \"const\": \"ends_with\",\n                      \"description\": \"Field must end with the provided suffix.\"\n                    },\n                    {\n                      \"const\": \"lt\",\n                      \"description\": \"Field must be less than the provided value (lexicographic / numeric / date).\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"work funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nShow me high priority tasks for the Launch team over the next 1 weeks\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Expecting ',' delimiter: line 40 column 10 (char 862)"}
{"schema_id": "work_funnel_v1", "query": "Show me high priority tasks for the Launch team between November 25 and December 5 2025", "target_valid": true, "raw_output": "{\n  \"prompt\": \"Show me high priority tasks for the Launch team between November 25 and December 5 2025\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"task.priority\",\n          \"operator\": \"gt\",\n          \"value\": \"Low\"\n        },\n        {\n          \"field\": \"task.status\",\n          \"operator\": \"lt\",\n          \"value\": \"Medium\"\n        },\n        {\n          \"field\": \"task.name\",\n          \"operator\": \"gt\",\n          \"value\": \"Unknown\"\n        }\n      ],\n      \"timeframe\": \"start\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"task.status\",\n          \"operator\": \"lt\",\n          \"value\": \"Medium\"\n        },\n        {\n          \"field\": \"task.priority\",\n          \"operator\": \"gt\",\n          \"value\": \"High\"\n        },\n        {\n          \"field\": \"task.name\",\n          \"operator\": \"lt\",\n          \"value\":", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"work_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"Schema for capturing work task attributes in a funnel-style workflow.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.team\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Launch\",\n                            \"description\": \"Launch track\"\n                          },\n                          {\n                            \"const\": \"Build\",\n                            \"description\": \"Build track\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"task.status\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"ToDo\",\n                            \"description\": \"To do\"\n                          },\n                          {\n                            \"const\": \"InProgress\",\n                            \"description\": \"In progress\"\n                          },\n                          {\n                            \"const\": \"Done\",\n                            \"description\": \"Done\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"task.priority\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Low\",\n                            \"description\": \"Low priority\"\n                          },\n                          {\n                            \"const\": \"Medium\",\n                            \"description\": \"Medium priority\"\n                          },\n                          {\n                            \"const\": \"High\",\n                            \"description\": \"High priority\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"task.type\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Feature\",\n                            \"description\": \"New feature\"\n                          },\n                          {\n                            \"const\": \"Bug\",\n                            \"description\": \"Bug fix\"\n                          },\n                          {\n                            \"const\": \"Chore\",\n                            \"description\": \"Maintenance\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"ec.team\",\n                      \"description\": \"High-level team or track.\"\n                    },\n                    {\n                      \"const\": \"task.status\",\n                      \"description\": \"Current status of the task.\"\n                    },\n                    {\n                      \"const\": \"task.priority\",\n                      \"description\": \"Urgency level.\"\n                    },\n                    {\n                      \"const\": \"project.name\",\n                      \"description\": \"Name of the project.\"\n                    },\n                    {\n                      \"const\": \"task.type\",\n                      \"description\": \"Kind of work.\"\n                    },\n                    {\n                      \"const\": \"task.owner\",\n                      \"description\": \"Assigned user.\"\n                    },\n                    {\n                      \"const\": \"deadline\",\n                      \"description\": \"Due date in ISO format.\"\n                    },\n                    {\n                      \"const\": \"effort.estimation\",\n                      \"description\": \"Estimated effort in story points.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"gt\",\n                      \"description\": \"Field must be greater than the provided value (lexicographic / numeric / date).\"\n                    },\n                    {\n                      \"const\": \"ends_with\",\n                      \"description\": \"Field must end with the provided suffix.\"\n                    },\n                    {\n                      \"const\": \"lt\",\n                      \"description\": \"Field must be less than the provided value (lexicographic / numeric / date).\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"work funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nShow me high priority tasks for the Launch team between November 25 and December 5 2025\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Expecting ',' delimiter: line 35 column 10 (char 767)"}
{"schema_id": "cooking_funnel_v1", "query": "Find a low-carb breakfast option in the last 19 days", "target_valid": true, "raw_output": "{\n  \"prompt\": \"Find a low-carb breakfast option in the last 19 days\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"cuisine\",\n          \"operator\": \"gt\",\n          \"value\": \"Italian\"\n        },\n        {\n          \"field\": \"breakfast\",\n          \"operator\": \"gt\",\n          \"value\": \"19\"\n        },\n        {\n          \"field\": \"breakfast\",\n          \"operator\": \"gt\",\n          \"value\": \"19\"\n        }\n      ]\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"breakfast\",\n          \"operator\": \"gt\",\n          \"value\": \"19\"\n        },\n        {\n          \"field\": \"breakfast\",\n          \"operator\": \"gt\",\n          \"value\": \"19\"\n        }\n      ]\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"breakfast\",\n          \"operator\": \"gt\",\n          \"value\": \"19\"\n        },\n        {", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"cooking_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"DSL for filtering recipes and meals by cuisine, difficulty, and key ingredients.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"recipe.cuisine\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Italian\",\n                            \"description\": \"Italian dishes\"\n                          },\n                          {\n                            \"const\": \"French\",\n                            \"description\": \"French dishes\"\n                          },\n                          {\n                            \"const\": \"Mexican\",\n                            \"description\": \"Mexican dishes\"\n                          },\n                          {\n                            \"const\": \"Indian\",\n                            \"description\": \"Indian dishes\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"recipe.difficulty\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Easy\",\n                            \"description\": \"Quick and simple\"\n                          },\n                          {\n                            \"const\": \"Medium\",\n                            \"description\": \"Moderate effort\"\n                          },\n                          {\n                            \"const\": \"Hard\",\n                            \"description\": \"Advanced techniques\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"meal.type\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Breakfast\",\n                            \"description\": \"Morning meal\"\n                          },\n                          {\n                            \"const\": \"Lunch\",\n                            \"description\": \"Midday meal\"\n                          },\n                          {\n                            \"const\": \"Dinner\",\n                            \"description\": \"Evening meal\"\n                          },\n                          {\n                            \"const\": \"Snack\",\n                            \"description\": \"Light bite\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"meal.main_ingredient\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Chicken\",\n                            \"description\": \"Chicken-based\"\n                          },\n                          {\n                            \"const\": \"Beef\",\n                            \"description\": \"Beef-based\"\n                          },\n                          {\n                            \"const\": \"Vegetarian\",\n                            \"description\": \"Vegetarian\"\n                          },\n                          {\n                            \"const\": \"Seafood\",\n                            \"description\": \"Seafood-based\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ingredient.unit\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"grams\",\n                            \"description\": \"grams\"\n                          },\n                          {\n                            \"const\": \"cups\",\n                            \"description\": \"cups\"\n                          },\n                          {\n                            \"const\": \"tablespoons\",\n                            \"description\": \"tablespoons\"\n                          },\n                          {\n                            \"const\": \"pieces\",\n                            \"description\": \"pieces\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"recipe.name\",\n                      \"description\": \"Name of the recipe.\"\n                    },\n                    {\n                      \"const\": \"recipe.cuisine\",\n                      \"description\": \"Cuisine type.\"\n                    },\n                    {\n                      \"const\": \"recipe.difficulty\",\n                      \"description\": \"Preparation difficulty.\"\n                    },\n                    {\n                      \"const\": \"meal.type\",\n                      \"description\": \"Meal category.\"\n                    },\n                    {\n                      \"const\": \"meal.main_ingredient\",\n                      \"description\": \"Primary ingredient.\"\n                    },\n                    {\n                      \"const\": \"meal.prep_time\",\n                      \"description\": \"Preparation time in minutes.\"\n                    },\n                    {\n                      \"const\": \"ingredient.unit\",\n                      \"description\": \"Measurement unit.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"like\",\n                      \"description\": \"Field should fuzzy-match the value (partial / pattern).\"\n                    },\n                    {\n                      \"const\": \"gt\",\n                      \"description\": \"Field must be greater than the provided value (lexicographic / numeric / date).\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"cooking funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nFind a low-carb breakfast option in the last 19 days\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Expecting ',' delimiter: line 43 column 10 (char 826)"}
{"schema_id": "cooking_funnel_v1", "query": "Quel est le meilleur plat fran\u00e7ais pour le d\u00eener? over the next 1 weeks", "target_valid": true, "raw_output": "{\n  \"prompt\": \"Quel est le meilleur plat fran\u00e7ais pour le d\u00eener over the next 1 weeks\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"cuisine\",\n          \"operator\": \"gt\",\n          \"value\": \"French\"\n        },\n        {\n          \"field\": \"timeframe\",\n          \"operator\": \"end\",\n          \"value\": \"1 week\"\n        }\n      ],\n      \"description\": \"Le meilleur plat fran\u00e7ais pour le d\u00eener over the next 1 week\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"cuisine\",\n          \"operator\": \"end\",\n          \"value\": \"1 week\"\n        }\n      ],\n      \"description\": \"Le meilleur plat fran\u00e7ais pour le d\u00eener over the next 1 week\"\n    }\n  ]\n}", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"cooking_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"DSL for filtering recipes and meals by cuisine, difficulty, and key ingredients.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"recipe.cuisine\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Italian\",\n                            \"description\": \"Italian dishes\"\n                          },\n                          {\n                            \"const\": \"French\",\n                            \"description\": \"French dishes\"\n                          },\n                          {\n                            \"const\": \"Mexican\",\n                            \"description\": \"Mexican dishes\"\n                          },\n                          {\n                            \"const\": \"Indian\",\n                            \"description\": \"Indian dishes\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"recipe.difficulty\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Easy\",\n                            \"description\": \"Quick and simple\"\n                          },\n                          {\n                            \"const\": \"Medium\",\n                            \"description\": \"Moderate effort\"\n                          },\n                          {\n                            \"const\": \"Hard\",\n                            \"description\": \"Advanced techniques\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"meal.type\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Breakfast\",\n                            \"description\": \"Morning meal\"\n                          },\n                          {\n                            \"const\": \"Lunch\",\n                            \"description\": \"Midday meal\"\n                          },\n                          {\n                            \"const\": \"Dinner\",\n                            \"description\": \"Evening meal\"\n                          },\n                          {\n                            \"const\": \"Snack\",\n                            \"description\": \"Light bite\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"meal.main_ingredient\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Chicken\",\n                            \"description\": \"Chicken-based\"\n                          },\n                          {\n                            \"const\": \"Beef\",\n                            \"description\": \"Beef-based\"\n                          },\n                          {\n                            \"const\": \"Vegetarian\",\n                            \"description\": \"Vegetarian\"\n                          },\n                          {\n                            \"const\": \"Seafood\",\n                            \"description\": \"Seafood-based\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ingredient.unit\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"grams\",\n                            \"description\": \"grams\"\n                          },\n                          {\n                            \"const\": \"cups\",\n                            \"description\": \"cups\"\n                          },\n                          {\n                            \"const\": \"tablespoons\",\n                            \"description\": \"tablespoons\"\n                          },\n                          {\n                            \"const\": \"pieces\",\n                            \"description\": \"pieces\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"recipe.name\",\n                      \"description\": \"Name of the recipe.\"\n                    },\n                    {\n                      \"const\": \"recipe.cuisine\",\n                      \"description\": \"Cuisine type.\"\n                    },\n                    {\n                      \"const\": \"recipe.difficulty\",\n                      \"description\": \"Preparation difficulty.\"\n                    },\n                    {\n                      \"const\": \"meal.type\",\n                      \"description\": \"Meal category.\"\n                    },\n                    {\n                      \"const\": \"meal.main_ingredient\",\n                      \"description\": \"Primary ingredient.\"\n                    },\n                    {\n                      \"const\": \"meal.prep_time\",\n                      \"description\": \"Preparation time in minutes.\"\n                    },\n                    {\n                      \"const\": \"ingredient.unit\",\n                      \"description\": \"Measurement unit.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"like\",\n                      \"description\": \"Field should fuzzy-match the value (partial / pattern).\"\n                    },\n                    {\n                      \"const\": \"gt\",\n                      \"description\": \"Field must be greater than the provided value (lexicographic / numeric / date).\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"cooking funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nQuel est le meilleur plat fran\u00e7ais pour le d\u00eener? over the next 1 weeks\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": true, "student_canonical": "{\n  \"prompt\": \"Quel est le meilleur plat fran\\u00e7ais pour le d\\u00eener over the next 1 weeks\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"cuisine\",\n          \"operator\": \"gt\",\n          \"value\": \"French\"\n        },\n        {\n          \"field\": \"timeframe\",\n          \"operator\": \"end\",\n          \"value\": \"1 week\"\n        }\n      ],\n      \"description\": \"Le meilleur plat fran\\u00e7ais pour le d\\u00eener over the next 1 week\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"cuisine\",\n          \"operator\": \"end\",\n          \"value\": \"1 week\"\n        }\n      ],\n      \"description\": \"Le meilleur plat fran\\u00e7ais pour le d\\u00eener over the next 1 week\"\n    }\n  ]\n}", "target_canonical": "{\n  \"prompt\": \"Quel est le meilleur plat fran\\u00e7ais pour le d\\u00eener? over the next 1 weeks\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"meal.type\",\n          \"operator\": \"like\",\n          \"value\": \"Snack\"\n        },\n        {\n          \"field\": \"recipe.name\",\n          \"operator\": \"gt\",\n          \"value\": \"developer\"\n        }\n      ],\n      \"description\": \"Auto generated filter for cooking\",\n      \"name\": \"step_1\"\n    }\n  ],\n  \"timeframe\": {\n    \"end\": \"2025-12-31\",\n    \"start\": \"2025-12-18\"\n  }\n}", "exact_match": false, "semantic_match_target": false, "schema_valid": false, "schema_error": "'cuisine' is not valid under any of the given schemas\n\nFailed validating 'oneOf' in schema['properties']['steps']['items']['properties']['conditions']['items']['properties']['field']:\n    {'oneOf': [{'const': 'recipe.name',\n                'description': 'Name of the recipe.'},\n               {'const': 'recipe.cuisine', 'description': 'Cuisine type.'},\n               {'const': 'recipe.difficulty',\n                'description': 'Preparation difficulty.'},\n               {'const': 'meal.type', 'description': 'Meal category.'},\n               {'const': 'meal.main_ingredient',\n                'description': 'Primary ingredient.'},\n               {'const': 'meal.prep_time',\n                'description': 'Preparation time in minutes.'},\n               {'const': 'ingredient.unit',\n                'description': 'Measurement unit.'}],\n     'type': 'string'}\n\nOn instance['steps'][0]['conditions'][0]['field']:\n    'cuisine'", "matches_teacher": false, "semantic_match_teacher": false, "teacher_error": "Extra data: line 32 column 1 (char 712)", "semantic_pass": false}
{"schema_id": "travel_funnel_v1", "query": "Show me a family-friendly trip to Paris with a budget of medium and adventure activities in the last 4 weeks", "target_valid": true, "raw_output": "{\n  \"prompt\": \"Show me a family-friendly trip to Paris with a budget of medium and adventure activities in the last 4 weeks\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"trip.date\",\n          \"operator\": \"lt\",\n          \"value\": \"2025-12-30\"\n        },\n        {\n          \"field\": \"trip.duration\",\n          \"operator\": \"lt\",\n          \"value\": \"4\"\n        },\n        {\n          \"field\": \"trip.activity.type\",\n          \"operator\": \"like\",\n          \"value\": \"adventure\"\n        }\n      ],\n      \"name\": \"Paris\",\n      \"description\": \"Paris\",\n      \"timeframe\": \"last 3 weeks\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"trip.date\",\n          \"operator\": \"lt\",\n          \"value\": \"2025-12-30\"\n        },\n        {\n          \"field\": \"trip.duration\",\n          \"operator\": \"", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"travel_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"Travel planning, destinations, and experiences.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.team\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Launch\",\n                            \"description\": \"Initial launch phase\"\n                          },\n                          {\n                            \"const\": \"Build\",\n                            \"description\": \"Development phase\"\n                          },\n                          {\n                            \"const\": \"Ops\",\n                            \"description\": \"Operations phase\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"trip.destination\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Paris\",\n                            \"description\": \"France\"\n                          },\n                          {\n                            \"const\": \"Tokyo\",\n                            \"description\": \"Japan\"\n                          },\n                          {\n                            \"const\": \"New York\",\n                            \"description\": \"USA\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"trip.activity.type\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Adventure\",\n                            \"description\": \"Exciting activities\"\n                          },\n                          {\n                            \"const\": \"Culture\",\n                            \"description\": \"Historical sites\"\n                          },\n                          {\n                            \"const\": \"Relaxation\",\n                            \"description\": \"Leisure and spa\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"trip.budget.range\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Low\",\n                            \"description\": \"Budget-friendly\"\n                          },\n                          {\n                            \"const\": \"Medium\",\n                            \"description\": \"Mid-range\"\n                          },\n                          {\n                            \"const\": \"High\",\n                            \"description\": \"Premium\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"trip.accommodation.type\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Hotel\",\n                            \"description\": \"Standard hotel\"\n                          },\n                          {\n                            \"const\": \"Hostel\",\n                            \"description\": \"Shared lodging\"\n                          },\n                          {\n                            \"const\": \"Airbnb\",\n                            \"description\": \"Private rental\"\n                          },\n                          {\n                            \"const\": \"Camping\",\n                            \"description\": \"Outdoor camping\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"trip.language\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"English\",\n                            \"description\": \"English\"\n                          },\n                          {\n                            \"const\": \"French\",\n                            \"description\": \"French\"\n                          },\n                          {\n                            \"const\": \"Spanish\",\n                            \"description\": \"Spanish\"\n                          },\n                          {\n                            \"const\": \"Japanese\",\n                            \"description\": \"Japanese\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"trip.is_family\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Yes\",\n                            \"description\": \"Family-friendly\"\n                          },\n                          {\n                            \"const\": \"No\",\n                            \"description\": \"Not suitable\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"trip.is_accessible\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Yes\",\n                            \"description\": \"Accessible\"\n                          },\n                          {\n                            \"const\": \"No\",\n                            \"description\": \"Not accessible\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"ec.team\",\n                      \"description\": \"High-level team or track.\"\n                    },\n                    {\n                      \"const\": \"trip.destination\",\n                      \"description\": \"Primary travel destination.\"\n                    },\n                    {\n                      \"const\": \"trip.date\",\n                      \"description\": \"Travel start or date range.\"\n                    },\n                    {\n                      \"const\": \"trip.duration\",\n                      \"description\": \"Number of days.\"\n                    },\n                    {\n                      \"const\": \"trip.activity.type\",\n                      \"description\": \"Main activity category.\"\n                    },\n                    {\n                      \"const\": \"trip.budget.range\",\n                      \"description\": \"Budget tier.\"\n                    },\n                    {\n                      \"const\": \"trip.accommodation.type\",\n                      \"description\": \"Accommodation type.\"\n                    },\n                    {\n                      \"const\": \"trip.language\",\n                      \"description\": \"Preferred language.\"\n                    },\n                    {\n                      \"const\": \"trip.is_family\",\n                      \"description\": \"Suitable for families?\"\n                    },\n                    {\n                      \"const\": \"trip.is_accessible\",\n                      \"description\": \"Accessibility features available?\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"lt\",\n                      \"description\": \"Field must be less than the provided value (lexicographic / numeric / date).\"\n                    },\n                    {\n                      \"const\": \"like\",\n                      \"description\": \"Field should fuzzy-match the value (partial / pattern).\"\n                    },\n                    {\n                      \"const\": \"not_equals\",\n                      \"description\": \"Field must differ from the provided value.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"travel funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nShow me a family-friendly trip to Paris with a budget of medium and adventure activities in the last 4 weeks\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Expecting ',' delimiter: line 32 column 10 (char 752)"}
{"schema_id": "travel_funnel_v1", "query": "Quel type d'h\u00e9bergement proposez-vous pour un s\u00e9jour de 5 jours \u00e0 Tokyo? over the next 2 weeks", "target_valid": true, "raw_output": "{\n  \"prompt\": \"Quel type d'h\u00e9bergement proposez-vous pour un s\u00e9jour de 5 jours \u00e0 Tokyo over the next 2 weeks\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"trip.duration\",\n          \"operator\": \"lt\"\n        },\n        {\n          \"field\": \"trip.destination\",\n          \"operator\": \"lt\"\n        },\n        {\n          \"field\": \"trip.activity.type\",\n          \"operator\": \"like\"\n        }\n      ],\n      \"value\": \"Trip.Paris\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"trip.duration\",\n          \"operator\": \"lt\"\n        },\n        {\n          \"field\": \"trip.activity.type\",\n          \"operator\": \"like\"\n        }\n      ],\n      \"value\": \"Trip.Tokyo\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"trip.duration\",\n          \"operator\": \"lt\"\n        },\n        {\n          \"field\": \"trip", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"travel_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"Travel planning, destinations, and experiences.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.team\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Launch\",\n                            \"description\": \"Initial launch phase\"\n                          },\n                          {\n                            \"const\": \"Build\",\n                            \"description\": \"Development phase\"\n                          },\n                          {\n                            \"const\": \"Ops\",\n                            \"description\": \"Operations phase\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"trip.destination\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Paris\",\n                            \"description\": \"France\"\n                          },\n                          {\n                            \"const\": \"Tokyo\",\n                            \"description\": \"Japan\"\n                          },\n                          {\n                            \"const\": \"New York\",\n                            \"description\": \"USA\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"trip.activity.type\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Adventure\",\n                            \"description\": \"Exciting activities\"\n                          },\n                          {\n                            \"const\": \"Culture\",\n                            \"description\": \"Historical sites\"\n                          },\n                          {\n                            \"const\": \"Relaxation\",\n                            \"description\": \"Leisure and spa\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"trip.budget.range\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Low\",\n                            \"description\": \"Budget-friendly\"\n                          },\n                          {\n                            \"const\": \"Medium\",\n                            \"description\": \"Mid-range\"\n                          },\n                          {\n                            \"const\": \"High\",\n                            \"description\": \"Premium\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"trip.accommodation.type\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Hotel\",\n                            \"description\": \"Standard hotel\"\n                          },\n                          {\n                            \"const\": \"Hostel\",\n                            \"description\": \"Shared lodging\"\n                          },\n                          {\n                            \"const\": \"Airbnb\",\n                            \"description\": \"Private rental\"\n                          },\n                          {\n                            \"const\": \"Camping\",\n                            \"description\": \"Outdoor camping\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"trip.language\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"English\",\n                            \"description\": \"English\"\n                          },\n                          {\n                            \"const\": \"French\",\n                            \"description\": \"French\"\n                          },\n                          {\n                            \"const\": \"Spanish\",\n                            \"description\": \"Spanish\"\n                          },\n                          {\n                            \"const\": \"Japanese\",\n                            \"description\": \"Japanese\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"trip.is_family\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Yes\",\n                            \"description\": \"Family-friendly\"\n                          },\n                          {\n                            \"const\": \"No\",\n                            \"description\": \"Not suitable\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"trip.is_accessible\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Yes\",\n                            \"description\": \"Accessible\"\n                          },\n                          {\n                            \"const\": \"No\",\n                            \"description\": \"Not accessible\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"ec.team\",\n                      \"description\": \"High-level team or track.\"\n                    },\n                    {\n                      \"const\": \"trip.destination\",\n                      \"description\": \"Primary travel destination.\"\n                    },\n                    {\n                      \"const\": \"trip.date\",\n                      \"description\": \"Travel start or date range.\"\n                    },\n                    {\n                      \"const\": \"trip.duration\",\n                      \"description\": \"Number of days.\"\n                    },\n                    {\n                      \"const\": \"trip.activity.type\",\n                      \"description\": \"Main activity category.\"\n                    },\n                    {\n                      \"const\": \"trip.budget.range\",\n                      \"description\": \"Budget tier.\"\n                    },\n                    {\n                      \"const\": \"trip.accommodation.type\",\n                      \"description\": \"Accommodation type.\"\n                    },\n                    {\n                      \"const\": \"trip.language\",\n                      \"description\": \"Preferred language.\"\n                    },\n                    {\n                      \"const\": \"trip.is_family\",\n                      \"description\": \"Suitable for families?\"\n                    },\n                    {\n                      \"const\": \"trip.is_accessible\",\n                      \"description\": \"Accessibility features available?\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"lt\",\n                      \"description\": \"Field must be less than the provided value (lexicographic / numeric / date).\"\n                    },\n                    {\n                      \"const\": \"like\",\n                      \"description\": \"Field should fuzzy-match the value (partial / pattern).\"\n                    },\n                    {\n                      \"const\": \"not_equals\",\n                      \"description\": \"Field must differ from the provided value.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"travel funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nQuel type d'h\u00e9bergement proposez-vous pour un s\u00e9jour de 5 jours \u00e0 Tokyo? over the next 2 weeks\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Expecting ',' delimiter: line 39 column 10 (char 813)"}
{"schema_id": "fitness_funnel_v1", "query": "Show all cardio routines with duration under 30 minutes in the last 14 days", "target_valid": true, "raw_output": "{\n  \"prompt\": \"Show all cardio routines with duration under 30 minutes in the last 14 days\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"exercise.duration.minutes\",\n          \"operator\": \"integer\",\n          \"value\": 30\n        },\n        {\n          \"field\": \"exercise.duration.seconds\",\n          \"operator\": \"integer\",\n          \"value\": 30\n        },\n        {\n          \"field\": \"exercise.duration.minutes\",\n          \"operator\": \"integer\",\n          \"value\": 30\n        },\n        {\n          \"field\": \"exercise.duration.seconds\",\n          \"operator\": \"integer\",\n          \"value\": 30\n        },\n        {\n          \"field\": \"exercise.duration.minutes\",\n          \"operator\": \"integer\",\n          \"value\": 30\n        },\n        {\n          \"field\": \"exercise.duration.seconds\",\n          \"operator\": \"integer\",\n          \"value\": 30\n        },\n        {\n          \"field\": \"exercise.", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"fitness_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"Schema for capturing exercise routines, health metrics, and wellness activities.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.team\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Launch\",\n                            \"description\": \"Initial launch team\"\n                          },\n                          {\n                            \"const\": \"Build\",\n                            \"description\": \"Development and scaling\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"routine.type\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Strength\",\n                            \"description\": \"Muscle building\"\n                          },\n                          {\n                            \"const\": \"Cardio\",\n                            \"description\": \"Heart rate training\"\n                          },\n                          {\n                            \"const\": \"Flexibility\",\n                            \"description\": \"Stretching and mobility\"\n                          },\n                          {\n                            \"const\": \"Balance\",\n                            \"description\": \"Core stability\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"exercise.equipment.required\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"True\",\n                            \"description\": \"Equipment required\"\n                          },\n                          {\n                            \"const\": \"False\",\n                            \"description\": \"No equipment\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"wellness.activity\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Meditation\",\n                            \"description\": \"Mindfulness practice\"\n                          },\n                          {\n                            \"const\": \"Yoga\",\n                            \"description\": \"Yoga sessions\"\n                          },\n                          {\n                            \"const\": \"Sleep\",\n                            \"description\": \"Sleep hygiene\"\n                          },\n                          {\n                            \"const\": \"Hydration\",\n                            \"description\": \"Water intake\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"goal\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Weight Loss\",\n                            \"description\": \"Reduce body weight\"\n                          },\n                          {\n                            \"const\": \"Muscle Gain\",\n                            \"description\": \"Build muscle\"\n                          },\n                          {\n                            \"const\": \"Endurance\",\n                            \"description\": \"Improve stamina\"\n                          },\n                          {\n                            \"const\": \"Flexibility\",\n                            \"description\": \"Increase range of motion\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"location\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Gym\",\n                            \"description\": \"Fitness center\"\n                          },\n                          {\n                            \"const\": \"Home\",\n                            \"description\": \"At home\"\n                          },\n                          {\n                            \"const\": \"Outdoor\",\n                            \"description\": \"Open air\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"age_group\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Under18\",\n                            \"description\": \"Under 18 years\"\n                          },\n                          {\n                            \"const\": \"18-35\",\n                            \"description\": \"18 to 35 years\"\n                          },\n                          {\n                            \"const\": \"36-55\",\n                            \"description\": \"36 to 55 years\"\n                          },\n                          {\n                            \"const\": \"56+\",\n                            \"description\": \"56 years and older\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"ec.team\",\n                      \"description\": \"High-level team or track.\"\n                    },\n                    {\n                      \"const\": \"routine.type\",\n                      \"description\": \"Type of workout routine.\"\n                    },\n                    {\n                      \"const\": \"routine.duration_minutes\",\n                      \"description\": \"Length of the routine in minutes.\"\n                    },\n                    {\n                      \"const\": \"exercise.name\",\n                      \"description\": \"Name of the exercise.\"\n                    },\n                    {\n                      \"const\": \"exercise.reps\",\n                      \"description\": \"Number of repetitions.\"\n                    },\n                    {\n                      \"const\": \"exercise.sets\",\n                      \"description\": \"Number of sets.\"\n                    },\n                    {\n                      \"const\": \"exercise.equipment.required\",\n                      \"description\": \"Whether equipment is needed.\"\n                    },\n                    {\n                      \"const\": \"nutrition.diet_plan\",\n                      \"description\": \"Recommended diet plan.\"\n                    },\n                    {\n                      \"const\": \"wellness.activity\",\n                      \"description\": \"Additional wellness activities.\"\n                    },\n                    {\n                      \"const\": \"goal\",\n                      \"description\": \"Fitness goal.\"\n                    },\n                    {\n                      \"const\": \"location\",\n                      \"description\": \"Typical training location.\"\n                    },\n                    {\n                      \"const\": \"age_group\",\n                      \"description\": \"Target age range.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"not_in\",\n                      \"description\": \"Field must not be contained in a given set of values.\"\n                    },\n                    {\n                      \"const\": \"like\",\n                      \"description\": \"Field should fuzzy-match the value (partial / pattern).\"\n                    },\n                    {\n                      \"const\": \"not_equals\",\n                      \"description\": \"Field must differ from the provided value.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"fitness funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nShow all cardio routines with duration under 30 minutes in the last 14 days\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Expecting ',' delimiter: line 35 column 10 (char 876)"}
{"schema_id": "fitness_funnel_v1", "query": "Quel est le plan nutrition pour la perte de poids? in the last 19 days", "target_valid": true, "raw_output": "{\n  \"prompt\": \"Quel est le plan nutrition pour la perte de poids dans le dernier 19 jours? in the last 19 days\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"ec.team\",\n          \"operator\": \"not_in\",\n          \"value\": \"True\",\n          \"operator\": \"like\",\n          \"description\": \"At home\"\n        },\n        {\n          \"field\": \"routine.duration_minutes\",\n          \"operator\": \"not_in\",\n          \"value\": \"minutes\",\n          \"operator\": \"like\",\n          \"description\": \"minutes\"\n        },\n        {\n          \"field\": \"exercise.name\",\n          \"operator\": \"not_in\",\n          \"value\": \"weight loss\",\n          \"operator\": \"like\",\n          \"description\": \"weight loss\"\n        },\n        {\n          \"field\": \"exercise.reps\",\n          \"operator\": \"not_in\",\n          \"value\": \"minutes\",\n          \"operator\": \"like\",\n          \"description\": \"minutes\"\n        },", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"fitness_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"Schema for capturing exercise routines, health metrics, and wellness activities.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.team\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Launch\",\n                            \"description\": \"Initial launch team\"\n                          },\n                          {\n                            \"const\": \"Build\",\n                            \"description\": \"Development and scaling\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"routine.type\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Strength\",\n                            \"description\": \"Muscle building\"\n                          },\n                          {\n                            \"const\": \"Cardio\",\n                            \"description\": \"Heart rate training\"\n                          },\n                          {\n                            \"const\": \"Flexibility\",\n                            \"description\": \"Stretching and mobility\"\n                          },\n                          {\n                            \"const\": \"Balance\",\n                            \"description\": \"Core stability\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"exercise.equipment.required\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"True\",\n                            \"description\": \"Equipment required\"\n                          },\n                          {\n                            \"const\": \"False\",\n                            \"description\": \"No equipment\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"wellness.activity\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Meditation\",\n                            \"description\": \"Mindfulness practice\"\n                          },\n                          {\n                            \"const\": \"Yoga\",\n                            \"description\": \"Yoga sessions\"\n                          },\n                          {\n                            \"const\": \"Sleep\",\n                            \"description\": \"Sleep hygiene\"\n                          },\n                          {\n                            \"const\": \"Hydration\",\n                            \"description\": \"Water intake\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"goal\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Weight Loss\",\n                            \"description\": \"Reduce body weight\"\n                          },\n                          {\n                            \"const\": \"Muscle Gain\",\n                            \"description\": \"Build muscle\"\n                          },\n                          {\n                            \"const\": \"Endurance\",\n                            \"description\": \"Improve stamina\"\n                          },\n                          {\n                            \"const\": \"Flexibility\",\n                            \"description\": \"Increase range of motion\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"location\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Gym\",\n                            \"description\": \"Fitness center\"\n                          },\n                          {\n                            \"const\": \"Home\",\n                            \"description\": \"At home\"\n                          },\n                          {\n                            \"const\": \"Outdoor\",\n                            \"description\": \"Open air\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"age_group\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Under18\",\n                            \"description\": \"Under 18 years\"\n                          },\n                          {\n                            \"const\": \"18-35\",\n                            \"description\": \"18 to 35 years\"\n                          },\n                          {\n                            \"const\": \"36-55\",\n                            \"description\": \"36 to 55 years\"\n                          },\n                          {\n                            \"const\": \"56+\",\n                            \"description\": \"56 years and older\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"ec.team\",\n                      \"description\": \"High-level team or track.\"\n                    },\n                    {\n                      \"const\": \"routine.type\",\n                      \"description\": \"Type of workout routine.\"\n                    },\n                    {\n                      \"const\": \"routine.duration_minutes\",\n                      \"description\": \"Length of the routine in minutes.\"\n                    },\n                    {\n                      \"const\": \"exercise.name\",\n                      \"description\": \"Name of the exercise.\"\n                    },\n                    {\n                      \"const\": \"exercise.reps\",\n                      \"description\": \"Number of repetitions.\"\n                    },\n                    {\n                      \"const\": \"exercise.sets\",\n                      \"description\": \"Number of sets.\"\n                    },\n                    {\n                      \"const\": \"exercise.equipment.required\",\n                      \"description\": \"Whether equipment is needed.\"\n                    },\n                    {\n                      \"const\": \"nutrition.diet_plan\",\n                      \"description\": \"Recommended diet plan.\"\n                    },\n                    {\n                      \"const\": \"wellness.activity\",\n                      \"description\": \"Additional wellness activities.\"\n                    },\n                    {\n                      \"const\": \"goal\",\n                      \"description\": \"Fitness goal.\"\n                    },\n                    {\n                      \"const\": \"location\",\n                      \"description\": \"Typical training location.\"\n                    },\n                    {\n                      \"const\": \"age_group\",\n                      \"description\": \"Target age range.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"not_in\",\n                      \"description\": \"Field must not be contained in a given set of values.\"\n                    },\n                    {\n                      \"const\": \"like\",\n                      \"description\": \"Field should fuzzy-match the value (partial / pattern).\"\n                    },\n                    {\n                      \"const\": \"not_equals\",\n                      \"description\": \"Field must differ from the provided value.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"fitness funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nQuel est le plan nutrition pour la perte de poids? in the last 19 days\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Expecting ',' delimiter: line 33 column 10 (char 898)"}
{"schema_id": "education_funnel_v1", "query": "Quel est le niveau de la formation Build en anglais? in the last 20 days", "target_valid": true, "raw_output": "{\n  \"prompt\": \"Quel est le niveau de la formation Build en anglais? in the last 20 days\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"ec.timeframe.start\",\n          \"operator\": \"lt\",\n          \"value\": \"date\"\n        },\n        {\n          \"field\": \"ec.timeframe.end\",\n          \"operator\": \"gt\",\n          \"value\": \"date\"\n        }\n      ],\n      \"type\": \"string\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"ec.timeframe.start\",\n          \"operator\": \"lt\",\n          \"value\": \"date\"\n        },\n        {\n          \"field\": \"ec.timeframe.end\",\n          \"operator\": \"gt\",\n          \"value\": \"date\"\n        }\n      ],\n      \"type\": \"string\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"ec.timeframe.start\",\n          \"operator\": \"lt\",\n          \"value\":", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"education_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"Defines course and curriculum metadata for educational programs.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.team\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Launch\",\n                            \"description\": \"Initiation phase\"\n                          },\n                          {\n                            \"const\": \"Build\",\n                            \"description\": \"Development phase\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.subject\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Math\",\n                            \"description\": \"Mathematics\"\n                          },\n                          {\n                            \"const\": \"English\",\n                            \"description\": \"English language\"\n                          },\n                          {\n                            \"const\": \"History\",\n                            \"description\": \"Historical studies\"\n                          },\n                          {\n                            \"const\": \"Science\",\n                            \"description\": \"Scientific disciplines\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.level\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Elementary\",\n                            \"description\": \"Primary education\"\n                          },\n                          {\n                            \"const\": \"Middle\",\n                            \"description\": \"Secondary education\"\n                          },\n                          {\n                            \"const\": \"High\",\n                            \"description\": \"High school\"\n                          },\n                          {\n                            \"const\": \"Undergraduate\",\n                            \"description\": \"College undergrad\"\n                          },\n                          {\n                            \"const\": \"Graduate\",\n                            \"description\": \"Postgraduate\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.language\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"English\",\n                            \"description\": \"English\"\n                          },\n                          {\n                            \"const\": \"French\",\n                            \"description\": \"French\"\n                          },\n                          {\n                            \"const\": \"Spanish\",\n                            \"description\": \"Spanish\"\n                          },\n                          {\n                            \"const\": \"German\",\n                            \"description\": \"German\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"ec.team\",\n                      \"description\": \"High-level team or track.\"\n                    },\n                    {\n                      \"const\": \"ec.subject\",\n                      \"description\": \"Academic subject area.\"\n                    },\n                    {\n                      \"const\": \"ec.level\",\n                      \"description\": \"Course level.\"\n                    },\n                    {\n                      \"const\": \"ec.course_code\",\n                      \"description\": \"Alphanumeric course identifier.\"\n                    },\n                    {\n                      \"const\": \"ec.course_title\",\n                      \"description\": \"Course title.\"\n                    },\n                    {\n                      \"const\": \"ec.language\",\n                      \"description\": \"Language of instruction.\"\n                    },\n                    {\n                      \"const\": \"ec.duration_weeks\",\n                      \"description\": \"Length in weeks.\"\n                    },\n                    {\n                      \"const\": \"ec.pre_requisites\",\n                      \"description\": \"Required prior courses.\"\n                    },\n                    {\n                      \"const\": \"ec.instructor_name\",\n                      \"description\": \"Instructor's full name.\"\n                    },\n                    {\n                      \"const\": \"ec.start_date\",\n                      \"description\": \"Course start date (YYYY-MM-DD).\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"lt\",\n                      \"description\": \"Field must be less than the provided value (lexicographic / numeric / date).\"\n                    },\n                    {\n                      \"const\": \"starts_with\",\n                      \"description\": \"Field must start with the provided prefix.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"education funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nQuel est le niveau de la formation Build en anglais? in the last 20 days\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Expecting ',' delimiter: line 33 column 6 (char 693)"}
{"schema_id": "education_funnel_v1", "query": "Which courses are in the Build team for Math? in the last 4 weeks", "target_valid": true, "raw_output": "{\n  \"prompt\": \"Which courses are in the Build team for Math? in the last 4 weeks\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"ec.timeframe.start\",\n          \"operator\": \"lt\",\n          \"value\": \"2025-12-30\"\n        },\n        {\n          \"field\": \"ec.timeframe.end\",\n          \"operator\": \"gt\",\n          \"value\": \"2025-12-30\"\n        }\n      ],\n      \"description\": \"Which courses are in the Build team for Math? in the last 4 weeks\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"ec.timeframe.start\",\n          \"operator\": \"lt\",\n          \"value\": \"2025-12-30\"\n        },\n        {\n          \"field\": \"ec.timeframe.end\",\n          \"operator\": \"gt\",\n          \"value\": \"2025-12-30\"\n        }\n      ],", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"education_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"Defines course and curriculum metadata for educational programs.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.team\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Launch\",\n                            \"description\": \"Initiation phase\"\n                          },\n                          {\n                            \"const\": \"Build\",\n                            \"description\": \"Development phase\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.subject\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Math\",\n                            \"description\": \"Mathematics\"\n                          },\n                          {\n                            \"const\": \"English\",\n                            \"description\": \"English language\"\n                          },\n                          {\n                            \"const\": \"History\",\n                            \"description\": \"Historical studies\"\n                          },\n                          {\n                            \"const\": \"Science\",\n                            \"description\": \"Scientific disciplines\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.level\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Elementary\",\n                            \"description\": \"Primary education\"\n                          },\n                          {\n                            \"const\": \"Middle\",\n                            \"description\": \"Secondary education\"\n                          },\n                          {\n                            \"const\": \"High\",\n                            \"description\": \"High school\"\n                          },\n                          {\n                            \"const\": \"Undergraduate\",\n                            \"description\": \"College undergrad\"\n                          },\n                          {\n                            \"const\": \"Graduate\",\n                            \"description\": \"Postgraduate\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.language\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"English\",\n                            \"description\": \"English\"\n                          },\n                          {\n                            \"const\": \"French\",\n                            \"description\": \"French\"\n                          },\n                          {\n                            \"const\": \"Spanish\",\n                            \"description\": \"Spanish\"\n                          },\n                          {\n                            \"const\": \"German\",\n                            \"description\": \"German\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"ec.team\",\n                      \"description\": \"High-level team or track.\"\n                    },\n                    {\n                      \"const\": \"ec.subject\",\n                      \"description\": \"Academic subject area.\"\n                    },\n                    {\n                      \"const\": \"ec.level\",\n                      \"description\": \"Course level.\"\n                    },\n                    {\n                      \"const\": \"ec.course_code\",\n                      \"description\": \"Alphanumeric course identifier.\"\n                    },\n                    {\n                      \"const\": \"ec.course_title\",\n                      \"description\": \"Course title.\"\n                    },\n                    {\n                      \"const\": \"ec.language\",\n                      \"description\": \"Language of instruction.\"\n                    },\n                    {\n                      \"const\": \"ec.duration_weeks\",\n                      \"description\": \"Length in weeks.\"\n                    },\n                    {\n                      \"const\": \"ec.pre_requisites\",\n                      \"description\": \"Required prior courses.\"\n                    },\n                    {\n                      \"const\": \"ec.instructor_name\",\n                      \"description\": \"Instructor's full name.\"\n                    },\n                    {\n                      \"const\": \"ec.start_date\",\n                      \"description\": \"Course start date (YYYY-MM-DD).\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"lt\",\n                      \"description\": \"Field must be less than the provided value (lexicographic / numeric / date).\"\n                    },\n                    {\n                      \"const\": \"starts_with\",\n                      \"description\": \"Field must start with the provided prefix.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"education funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nWhich courses are in the Build team for Math? in the last 4 weeks\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Expecting ',' delimiter: line 30 column 10 (char 738)"}
{"schema_id": "finance_funnel_v1", "query": "List my upcoming loans and their due dates in the last 4 weeks", "target_valid": true, "raw_output": "{\n  \"prompt\": \"List my upcoming loans and their due dates in the last 4 weeks\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"timeframe.end\",\n          \"operator\": \"lt\",\n          \"value\": \"2025-12-30\"\n        },\n        {\n          \"field\": \"timeframe.start\",\n          \"operator\": \"gt\",\n          \"value\": \"00:00:00\"\n        }\n      ],\n      \"description\": \"This is a global filter for all steps of the funnel.\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"timeframe.start\",\n          \"operator\": \"gt\",\n          \"value\": \"2025-12-30\"\n        }\n      ],\n      \"description\": \"This is a global filter for all steps of the funnel.\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"timeframe.end\",\n          \"operator\": \"lt\",\n          \"value\": \"2", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"finance_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"Personal finance and investment management queries.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.team\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Launch\",\n                            \"description\": \"Initial launch phase\"\n                          },\n                          {\n                            \"const\": \"Build\",\n                            \"description\": \"Product development phase\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"user.profile.status\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Active\",\n                            \"description\": \"Actively managing finances\"\n                          },\n                          {\n                            \"const\": \"Inactive\",\n                            \"description\": \"No active financial activity\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"investment.portfolio.type\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Stocks\",\n                            \"description\": \"Equity investments\"\n                          },\n                          {\n                            \"const\": \"Bonds\",\n                            \"description\": \"Debt instruments\"\n                          },\n                          {\n                            \"const\": \"MutualFunds\",\n                            \"description\": \"Collective investment funds\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"expense.category\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Food\",\n                            \"description\": \"Daily food expenses\"\n                          },\n                          {\n                            \"const\": \"Rent\",\n                            \"description\": \"Housing payments\"\n                          },\n                          {\n                            \"const\": \"Utilities\",\n                            \"description\": \"Electricity, water, etc.\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"income.source\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Salary\",\n                            \"description\": \"Employment earnings\"\n                          },\n                          {\n                            \"const\": \"Investment\",\n                            \"description\": \"Returns from investments\"\n                          },\n                          {\n                            \"const\": \"Other\",\n                            \"description\": \"Miscellaneous income\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"loan.type\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Mortgage\",\n                            \"description\": \"Home loan\"\n                          },\n                          {\n                            \"const\": \"Auto\",\n                            \"description\": \"Vehicle loan\"\n                          },\n                          {\n                            \"const\": \"Personal\",\n                            \"description\": \"Unsecured personal loan\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"risk.tolerance\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Low\",\n                            \"description\": \"Minimal risk\"\n                          },\n                          {\n                            \"const\": \"Medium\",\n                            \"description\": \"Balanced risk\"\n                          },\n                          {\n                            \"const\": \"High\",\n                            \"description\": \"Aggressive risk\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"ec.team\",\n                      \"description\": \"High-level team or track.\"\n                    },\n                    {\n                      \"const\": \"user.profile.status\",\n                      \"description\": \"Current financial status.\"\n                    },\n                    {\n                      \"const\": \"budget.monthly\",\n                      \"description\": \"Monthly budget allocation.\"\n                    },\n                    {\n                      \"const\": \"investment.portfolio.type\",\n                      \"description\": \"Type of investment portfolio.\"\n                    },\n                    {\n                      \"const\": \"expense.category\",\n                      \"description\": \"Expense category.\"\n                    },\n                    {\n                      \"const\": \"income.source\",\n                      \"description\": \"Source of income.\"\n                    },\n                    {\n                      \"const\": \"goal.savings\",\n                      \"description\": \"Savings goal amount.\"\n                    },\n                    {\n                      \"const\": \"loan.type\",\n                      \"description\": \"Loan type.\"\n                    },\n                    {\n                      \"const\": \"risk.tolerance\",\n                      \"description\": \"Risk tolerance level.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"lt\",\n                      \"description\": \"Field must be less than the provided value (lexicographic / numeric / date).\"\n                    },\n                    {\n                      \"const\": \"like\",\n                      \"description\": \"Field should fuzzy-match the value (partial / pattern).\"\n                    },\n                    {\n                      \"const\": \"equals\",\n                      \"description\": \"Field must exactly equal the provided value.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"finance funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nList my upcoming loans and their due dates in the last 4 weeks\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Expecting ',' delimiter: line 28 column 6 (char 682)"}
{"schema_id": "finance_funnel_v1", "query": "Show me my monthly budget and expenses in the last 16 days", "target_valid": true, "raw_output": "{\n  \"prompt\": \"Show me my monthly budget and expenses in the last 16 days\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"budget.monthly\",\n          \"operator\": \"lt\",\n          \"value\": \"1000000\"\n        },\n        {\n          \"field\": \"expenses.amount\",\n          \"operator\": \"lt\",\n          \"value\": \"1000000\"\n        }\n      ],\n      \"description\": \"My monthly budget and expenses in the last 16 days\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"budget.monthly\",\n          \"operator\": \"lt\",\n          \"value\": \"1000000\"\n        },\n        {\n          \"field\": \"expenses.amount\",\n          \"operator\": \"lt\",\n          \"value\": \"1000000\"\n        }\n      ],\n      \"description\": \"My monthly budget and expenses in the last 16 days\"\n    },\n    {\n      \"conditions\":", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"finance_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"Personal finance and investment management queries.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.team\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Launch\",\n                            \"description\": \"Initial launch phase\"\n                          },\n                          {\n                            \"const\": \"Build\",\n                            \"description\": \"Product development phase\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"user.profile.status\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Active\",\n                            \"description\": \"Actively managing finances\"\n                          },\n                          {\n                            \"const\": \"Inactive\",\n                            \"description\": \"No active financial activity\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"investment.portfolio.type\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Stocks\",\n                            \"description\": \"Equity investments\"\n                          },\n                          {\n                            \"const\": \"Bonds\",\n                            \"description\": \"Debt instruments\"\n                          },\n                          {\n                            \"const\": \"MutualFunds\",\n                            \"description\": \"Collective investment funds\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"expense.category\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Food\",\n                            \"description\": \"Daily food expenses\"\n                          },\n                          {\n                            \"const\": \"Rent\",\n                            \"description\": \"Housing payments\"\n                          },\n                          {\n                            \"const\": \"Utilities\",\n                            \"description\": \"Electricity, water, etc.\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"income.source\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Salary\",\n                            \"description\": \"Employment earnings\"\n                          },\n                          {\n                            \"const\": \"Investment\",\n                            \"description\": \"Returns from investments\"\n                          },\n                          {\n                            \"const\": \"Other\",\n                            \"description\": \"Miscellaneous income\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"loan.type\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Mortgage\",\n                            \"description\": \"Home loan\"\n                          },\n                          {\n                            \"const\": \"Auto\",\n                            \"description\": \"Vehicle loan\"\n                          },\n                          {\n                            \"const\": \"Personal\",\n                            \"description\": \"Unsecured personal loan\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"risk.tolerance\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Low\",\n                            \"description\": \"Minimal risk\"\n                          },\n                          {\n                            \"const\": \"Medium\",\n                            \"description\": \"Balanced risk\"\n                          },\n                          {\n                            \"const\": \"High\",\n                            \"description\": \"Aggressive risk\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"ec.team\",\n                      \"description\": \"High-level team or track.\"\n                    },\n                    {\n                      \"const\": \"user.profile.status\",\n                      \"description\": \"Current financial status.\"\n                    },\n                    {\n                      \"const\": \"budget.monthly\",\n                      \"description\": \"Monthly budget allocation.\"\n                    },\n                    {\n                      \"const\": \"investment.portfolio.type\",\n                      \"description\": \"Type of investment portfolio.\"\n                    },\n                    {\n                      \"const\": \"expense.category\",\n                      \"description\": \"Expense category.\"\n                    },\n                    {\n                      \"const\": \"income.source\",\n                      \"description\": \"Source of income.\"\n                    },\n                    {\n                      \"const\": \"goal.savings\",\n                      \"description\": \"Savings goal amount.\"\n                    },\n                    {\n                      \"const\": \"loan.type\",\n                      \"description\": \"Loan type.\"\n                    },\n                    {\n                      \"const\": \"risk.tolerance\",\n                      \"description\": \"Risk tolerance level.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"lt\",\n                      \"description\": \"Field must be less than the provided value (lexicographic / numeric / date).\"\n                    },\n                    {\n                      \"const\": \"like\",\n                      \"description\": \"Field should fuzzy-match the value (partial / pattern).\"\n                    },\n                    {\n                      \"const\": \"equals\",\n                      \"description\": \"Field must exactly equal the provided value.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"finance funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nShow me my monthly budget and expenses in the last 16 days\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Expecting ',' delimiter: line 33 column 6 (char 783)"}
{"schema_id": "entertainment_funnel_v1", "query": "Show me French comedies released after 2015 over the next 1 weeks", "target_valid": true, "raw_output": "{\n  \"prompt\": \"Show me French comedies released after 2015 over the next 1 week\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"timeframe.end\",\n          \"operator\": \"equals\",\n          \"value\": \"2015-12-30\"\n        },\n        {\n          \"field\": \"timeframe.start\",\n          \"operator\": \"equals\",\n          \"value\": \"00:00:00\"\n        }\n      ],\n      \"description\": \"French comedies released after 2015 over the next 1 week\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"timeframe.start\",\n          \"operator\": \"equals\",\n          \"value\": \"00:00:00\"\n        }\n      ],\n      \"description\": \"French comedies released after 2015 over the next 1 week\"\n    }\n  ],\n  \"timeframe\": \"2015-12-30\"\n}\n}", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"entertainment_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"Catalog schema for movies, music, games, and leisure activities.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.team\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Launch\",\n                            \"description\": \"New product launch\"\n                          },\n                          {\n                            \"const\": \"Build\",\n                            \"description\": \"Development phase\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.genre\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Action\",\n                            \"description\": \"Action\"\n                          },\n                          {\n                            \"const\": \"Comedy\",\n                            \"description\": \"Comedy\"\n                          },\n                          {\n                            \"const\": \"Drama\",\n                            \"description\": \"Drama\"\n                          },\n                          {\n                            \"const\": \"Horror\",\n                            \"description\": \"Horror\"\n                          },\n                          {\n                            \"const\": \"Sci-Fi\",\n                            \"description\": \"Sci-Fi\"\n                          },\n                          {\n                            \"const\": \"Documentary\",\n                            \"description\": \"Documentary\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.rating\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"G\",\n                            \"description\": \"G\"\n                          },\n                          {\n                            \"const\": \"PG\",\n                            \"description\": \"PG\"\n                          },\n                          {\n                            \"const\": \"PG-13\",\n                            \"description\": \"PG-13\"\n                          },\n                          {\n                            \"const\": \"R\",\n                            \"description\": \"R\"\n                          },\n                          {\n                            \"const\": \"NC-17\",\n                            \"description\": \"NC-17\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.language\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"English\",\n                            \"description\": \"English\"\n                          },\n                          {\n                            \"const\": \"French\",\n                            \"description\": \"French\"\n                          },\n                          {\n                            \"const\": \"Spanish\",\n                            \"description\": \"Spanish\"\n                          },\n                          {\n                            \"const\": \"German\",\n                            \"description\": \"German\"\n                          },\n                          {\n                            \"const\": \"Mandarin\",\n                            \"description\": \"Mandarin\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.platform\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Theaters\",\n                            \"description\": \"Theaters\"\n                          },\n                          {\n                            \"const\": \"Netflix\",\n                            \"description\": \"Netflix\"\n                          },\n                          {\n                            \"const\": \"Amazon Prime\",\n                            \"description\": \"Amazon Prime\"\n                          },\n                          {\n                            \"const\": \"Disney+\",\n                            \"description\": \"Disney+\"\n                          },\n                          {\n                            \"const\": \"Hulu\",\n                            \"description\": \"Hulu\"\n                          },\n                          {\n                            \"const\": \"YouTube\",\n                            \"description\": \"YouTube\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.country_of_origin\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"USA\",\n                            \"description\": \"USA\"\n                          },\n                          {\n                            \"const\": \"UK\",\n                            \"description\": \"UK\"\n                          },\n                          {\n                            \"const\": \"France\",\n                            \"description\": \"France\"\n                          },\n                          {\n                            \"const\": \"Germany\",\n                            \"description\": \"Germany\"\n                          },\n                          {\n                            \"const\": \"Japan\",\n                            \"description\": \"Japan\"\n                          },\n                          {\n                            \"const\": \"South Korea\",\n                            \"description\": \"South Korea\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.format\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"DVD\",\n                            \"description\": \"DVD\"\n                          },\n                          {\n                            \"const\": \"Blu-ray\",\n                            \"description\": \"Blu-ray\"\n                          },\n                          {\n                            \"const\": \"Digital\",\n                            \"description\": \"Digital\"\n                          },\n                          {\n                            \"const\": \"4K\",\n                            \"description\": \"4K\"\n                          },\n                          {\n                            \"const\": \"HDR\",\n                            \"description\": \"HDR\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"ec.team\",\n                      \"description\": \"High-level team or track.\"\n                    },\n                    {\n                      \"const\": \"ec.genre\",\n                      \"description\": \"Primary genre of the entertainment.\"\n                    },\n                    {\n                      \"const\": \"ec.rating\",\n                      \"description\": \"Content rating.\"\n                    },\n                    {\n                      \"const\": \"ec.release_year\",\n                      \"description\": \"Year of release.\"\n                    },\n                    {\n                      \"const\": \"ec.language\",\n                      \"description\": \"Primary language.\"\n                    },\n                    {\n                      \"const\": \"ec.director\",\n                      \"description\": \"Director of the production.\"\n                    },\n                    {\n                      \"const\": \"ec.platform\",\n                      \"description\": \"Distribution platform.\"\n                    },\n                    {\n                      \"const\": \"ec.duration\",\n                      \"description\": \"Runtime in minutes.\"\n                    },\n                    {\n                      \"const\": \"ec.country_of_origin\",\n                      \"description\": \"Country where produced.\"\n                    },\n                    {\n                      \"const\": \"ec.format\",\n                      \"description\": \"Physical or digital format.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"equals\",\n                      \"description\": \"Field must exactly equal the provided value.\"\n                    },\n                    {\n                      \"const\": \"lt\",\n                      \"description\": \"Field must be less than the provided value (lexicographic / numeric / date).\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"entertainment funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nShow me French comedies released after 2015 over the next 1 weeks\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Extra data: line 32 column 1 (char 738)"}
{"schema_id": "entertainment_funnel_v1", "query": "List all sci-fi movies directed by Christopher Nolan on Netflix in the last 3 weeks", "target_valid": true, "raw_output": "{\n  \"prompt\": \"List all sci-fi movies directed by Christopher Nolan on Netflix in the last 3 weeks\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"timeframe\",\n          \"operator\": \"equals\",\n          \"value\": \"2025-12-30\"\n        },\n        {\n          \"field\": \"start\",\n          \"operator\": \"equals\",\n          \"value\": \"00:00:00\"\n        },\n        {\n          \"field\": \"end\",\n          \"operator\": \"equals\",\n          \"value\": \"2025-12-30\"\n        }\n      ],\n      \"type\": \"array\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"timeframe\",\n          \"operator\": \"equals\",\n          \"value\": \"2025-12-30\"\n        },\n        {\n          \"field\": \"start\",\n          \"operator\": \"equals\",\n          \"value\": \"00:00:00\"", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"entertainment_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"Catalog schema for movies, music, games, and leisure activities.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.team\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Launch\",\n                            \"description\": \"New product launch\"\n                          },\n                          {\n                            \"const\": \"Build\",\n                            \"description\": \"Development phase\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.genre\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Action\",\n                            \"description\": \"Action\"\n                          },\n                          {\n                            \"const\": \"Comedy\",\n                            \"description\": \"Comedy\"\n                          },\n                          {\n                            \"const\": \"Drama\",\n                            \"description\": \"Drama\"\n                          },\n                          {\n                            \"const\": \"Horror\",\n                            \"description\": \"Horror\"\n                          },\n                          {\n                            \"const\": \"Sci-Fi\",\n                            \"description\": \"Sci-Fi\"\n                          },\n                          {\n                            \"const\": \"Documentary\",\n                            \"description\": \"Documentary\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.rating\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"G\",\n                            \"description\": \"G\"\n                          },\n                          {\n                            \"const\": \"PG\",\n                            \"description\": \"PG\"\n                          },\n                          {\n                            \"const\": \"PG-13\",\n                            \"description\": \"PG-13\"\n                          },\n                          {\n                            \"const\": \"R\",\n                            \"description\": \"R\"\n                          },\n                          {\n                            \"const\": \"NC-17\",\n                            \"description\": \"NC-17\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.language\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"English\",\n                            \"description\": \"English\"\n                          },\n                          {\n                            \"const\": \"French\",\n                            \"description\": \"French\"\n                          },\n                          {\n                            \"const\": \"Spanish\",\n                            \"description\": \"Spanish\"\n                          },\n                          {\n                            \"const\": \"German\",\n                            \"description\": \"German\"\n                          },\n                          {\n                            \"const\": \"Mandarin\",\n                            \"description\": \"Mandarin\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.platform\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Theaters\",\n                            \"description\": \"Theaters\"\n                          },\n                          {\n                            \"const\": \"Netflix\",\n                            \"description\": \"Netflix\"\n                          },\n                          {\n                            \"const\": \"Amazon Prime\",\n                            \"description\": \"Amazon Prime\"\n                          },\n                          {\n                            \"const\": \"Disney+\",\n                            \"description\": \"Disney+\"\n                          },\n                          {\n                            \"const\": \"Hulu\",\n                            \"description\": \"Hulu\"\n                          },\n                          {\n                            \"const\": \"YouTube\",\n                            \"description\": \"YouTube\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.country_of_origin\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"USA\",\n                            \"description\": \"USA\"\n                          },\n                          {\n                            \"const\": \"UK\",\n                            \"description\": \"UK\"\n                          },\n                          {\n                            \"const\": \"France\",\n                            \"description\": \"France\"\n                          },\n                          {\n                            \"const\": \"Germany\",\n                            \"description\": \"Germany\"\n                          },\n                          {\n                            \"const\": \"Japan\",\n                            \"description\": \"Japan\"\n                          },\n                          {\n                            \"const\": \"South Korea\",\n                            \"description\": \"South Korea\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.format\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"DVD\",\n                            \"description\": \"DVD\"\n                          },\n                          {\n                            \"const\": \"Blu-ray\",\n                            \"description\": \"Blu-ray\"\n                          },\n                          {\n                            \"const\": \"Digital\",\n                            \"description\": \"Digital\"\n                          },\n                          {\n                            \"const\": \"4K\",\n                            \"description\": \"4K\"\n                          },\n                          {\n                            \"const\": \"HDR\",\n                            \"description\": \"HDR\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"ec.team\",\n                      \"description\": \"High-level team or track.\"\n                    },\n                    {\n                      \"const\": \"ec.genre\",\n                      \"description\": \"Primary genre of the entertainment.\"\n                    },\n                    {\n                      \"const\": \"ec.rating\",\n                      \"description\": \"Content rating.\"\n                    },\n                    {\n                      \"const\": \"ec.release_year\",\n                      \"description\": \"Year of release.\"\n                    },\n                    {\n                      \"const\": \"ec.language\",\n                      \"description\": \"Primary language.\"\n                    },\n                    {\n                      \"const\": \"ec.director\",\n                      \"description\": \"Director of the production.\"\n                    },\n                    {\n                      \"const\": \"ec.platform\",\n                      \"description\": \"Distribution platform.\"\n                    },\n                    {\n                      \"const\": \"ec.duration\",\n                      \"description\": \"Runtime in minutes.\"\n                    },\n                    {\n                      \"const\": \"ec.country_of_origin\",\n                      \"description\": \"Country where produced.\"\n                    },\n                    {\n                      \"const\": \"ec.format\",\n                      \"description\": \"Physical or digital format.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"equals\",\n                      \"description\": \"Field must exactly equal the provided value.\"\n                    },\n                    {\n                      \"const\": \"lt\",\n                      \"description\": \"Field must be less than the provided value (lexicographic / numeric / date).\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"entertainment funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nList all sci-fi movies directed by Christopher Nolan on Netflix in the last 3 weeks\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Expecting ',' delimiter: line 30 column 10 (char 661)"}
{"schema_id": "technology_funnel_v1", "query": "List the latest breaking news about cloud services from Google in the last 21 days", "target_valid": true, "raw_output": "{\n  \"prompt\": \"List the latest breaking news about cloud services from Google in the last 21 days\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"tech.cloud.services\",\n          \"operator\": \"equals\",\n          \"value\": \"Google Cloud Services\"\n        },\n        {\n          \"field\": \"tech.cloud.services\",\n          \"operator\": \"equals\",\n          \"value\": \"Google Cloud Services\"\n        },\n        {\n          \"field\": \"tech.cloud.services\",\n          \"operator\": \"equals\",\n          \"value\": \"Google Cloud Services\"\n        }\n      ],\n      \"name\": \"Google Cloud Services\",\n      \"type\": \"object\",\n      \"title\": \"Google Cloud Services\",\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"tech.cloud.services\",\n          \"operator\": \"equals\",\n          \"value\": \"Google Cloud Services\"\n        },\n        {\n          \"field\": \"tech.cloud", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"technology_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"Schema for tech-related queries across teams, gadgets, software, news, trends, markets, companies, and regulations.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.team\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Launch\",\n                            \"description\": \"Initial release\"\n                          },\n                          {\n                            \"const\": \"Build\",\n                            \"description\": \"Development phase\"\n                          },\n                          {\n                            \"const\": \"Test\",\n                            \"description\": \"Quality assurance\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"tech.gadget\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Smartphone\",\n                            \"description\": \"Mobile phone\"\n                          },\n                          {\n                            \"const\": \"Laptop\",\n                            \"description\": \"Portable computer\"\n                          },\n                          {\n                            \"const\": \"Smartwatch\",\n                            \"description\": \"Wearable device\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"tech.software\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"OperatingSystem\",\n                            \"description\": \"System OS\"\n                          },\n                          {\n                            \"const\": \"MobileApp\",\n                            \"description\": \"App for phones\"\n                          },\n                          {\n                            \"const\": \"CloudService\",\n                            \"description\": \"Online platform\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"tech.news\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Daily\",\n                            \"description\": \"Daily updates\"\n                          },\n                          {\n                            \"const\": \"Weekly\",\n                            \"description\": \"Weekly roundup\"\n                          },\n                          {\n                            \"const\": \"Breaking\",\n                            \"description\": \"Urgent news\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"tech.trend\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"AI\",\n                            \"description\": \"Artificial Intelligence\"\n                          },\n                          {\n                            \"const\": \"IoT\",\n                            \"description\": \"Internet of Things\"\n                          },\n                          {\n                            \"const\": \"5G\",\n                            \"description\": \"5G connectivity\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"tech.market\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Emerging\",\n                            \"description\": \"New market\"\n                          },\n                          {\n                            \"const\": \"Mature\",\n                            \"description\": \"Established market\"\n                          },\n                          {\n                            \"const\": \"Declining\",\n                            \"description\": \"Shrinking market\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"tech.company\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Apple\",\n                            \"description\": \"Apple Inc.\"\n                          },\n                          {\n                            \"const\": \"Google\",\n                            \"description\": \"Alphabet Inc.\"\n                          },\n                          {\n                            \"const\": \"Samsung\",\n                            \"description\": \"Samsung Electronics\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"tech.regulation\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"GDPR\",\n                            \"description\": \"EU data privacy\"\n                          },\n                          {\n                            \"const\": \"FCC\",\n                            \"description\": \"US communications\"\n                          },\n                          {\n                            \"const\": \"CE\",\n                            \"description\": \"European conformity\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"ec.team\",\n                      \"description\": \"High-level team or track.\"\n                    },\n                    {\n                      \"const\": \"tech.gadget\",\n                      \"description\": \"Category of hardware.\"\n                    },\n                    {\n                      \"const\": \"tech.software\",\n                      \"description\": \"Software type.\"\n                    },\n                    {\n                      \"const\": \"tech.news\",\n                      \"description\": \"News cadence.\"\n                    },\n                    {\n                      \"const\": \"tech.trend\",\n                      \"description\": \"Current tech trend.\"\n                    },\n                    {\n                      \"const\": \"tech.market\",\n                      \"description\": \"Market status.\"\n                    },\n                    {\n                      \"const\": \"tech.company\",\n                      \"description\": \"Key players.\"\n                    },\n                    {\n                      \"const\": \"tech.regulation\",\n                      \"description\": \"Applicable regulations.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"in\",\n                      \"description\": \"Field must be contained in a small set of values.\"\n                    },\n                    {\n                      \"const\": \"equals\",\n                      \"description\": \"Field must exactly equal the provided value.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"technology funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nList the latest breaking news about cloud services from Google in the last 21 days\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Expecting ',' delimiter: line 34 column 10 (char 880)"}
{"schema_id": "technology_funnel_v1", "query": "Which teams are focusing on the Build phase for AI gadgets? between November 25 and December 7 2025", "target_valid": true, "raw_output": "{\n  \"prompt\": \"Which teams are focusing on the Build phase for AI gadgets between November 25 and December 7 2025\",\n  \"steps\": [\n    {\n      \"conditions\": [\n        {\n          \"field\": \"tech.gadget\",\n          \"operator\": \"equals\",\n          \"value\": \"Smartphone\"\n        },\n        {\n          \"field\": \"tech.software\",\n          \"operator\": \"equals\",\n          \"value\": \"OperatingSystem\"\n        }\n      ],\n      \"name\": \"Build phase for AI gadgets\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"tech.gadget\",\n          \"operator\": \"equals\",\n          \"value\": \"MobileApp\"\n        },\n        {\n          \"field\": \"tech.software\",\n          \"operator\": \"equals\",\n          \"value\": \"CloudService\"\n        }\n      ],\n      \"name\": \"Build phase for AI gadgets\"\n    },\n    {\n      \"conditions\": [\n        {\n          \"field\": \"tech.software\",\n          \"operator\": \"equals\",", "prompt_text": "You are a JSON AST generator.\nYou must output a single JSON object that satisfies the following JSON Schema\nand represents the program matching the user request.\n\n[SCHEMA]\n{\n  \"$comment\": \"Semantic rule: timeframe is applied first as a global filter, then steps are applied sequentially.\",\n  \"$id\": \"technology_funnel_v1\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"description\": \"Schema for tech-related queries across teams, gadgets, software, news, trends, markets, companies, and regulations.\",\n  \"properties\": {\n    \"prompt\": {\n      \"description\": \"Natural language user query that describes the overall funnel.\",\n      \"minLength\": 1,\n      \"type\": \"string\"\n    },\n    \"steps\": {\n      \"items\": {\n        \"additionalProperties\": false,\n        \"properties\": {\n          \"conditions\": {\n            \"items\": {\n              \"$comment\": \"Semantic rule: all conditions within a given step are combined with logical AND.\",\n              \"additionalProperties\": false,\n              \"allOf\": [\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"ec.team\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Launch\",\n                            \"description\": \"Initial release\"\n                          },\n                          {\n                            \"const\": \"Build\",\n                            \"description\": \"Development phase\"\n                          },\n                          {\n                            \"const\": \"Test\",\n                            \"description\": \"Quality assurance\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"tech.gadget\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Smartphone\",\n                            \"description\": \"Mobile phone\"\n                          },\n                          {\n                            \"const\": \"Laptop\",\n                            \"description\": \"Portable computer\"\n                          },\n                          {\n                            \"const\": \"Smartwatch\",\n                            \"description\": \"Wearable device\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"tech.software\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"OperatingSystem\",\n                            \"description\": \"System OS\"\n                          },\n                          {\n                            \"const\": \"MobileApp\",\n                            \"description\": \"App for phones\"\n                          },\n                          {\n                            \"const\": \"CloudService\",\n                            \"description\": \"Online platform\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"tech.news\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Daily\",\n                            \"description\": \"Daily updates\"\n                          },\n                          {\n                            \"const\": \"Weekly\",\n                            \"description\": \"Weekly roundup\"\n                          },\n                          {\n                            \"const\": \"Breaking\",\n                            \"description\": \"Urgent news\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"tech.trend\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"AI\",\n                            \"description\": \"Artificial Intelligence\"\n                          },\n                          {\n                            \"const\": \"IoT\",\n                            \"description\": \"Internet of Things\"\n                          },\n                          {\n                            \"const\": \"5G\",\n                            \"description\": \"5G connectivity\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"tech.market\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Emerging\",\n                            \"description\": \"New market\"\n                          },\n                          {\n                            \"const\": \"Mature\",\n                            \"description\": \"Established market\"\n                          },\n                          {\n                            \"const\": \"Declining\",\n                            \"description\": \"Shrinking market\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"tech.company\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"Apple\",\n                            \"description\": \"Apple Inc.\"\n                          },\n                          {\n                            \"const\": \"Google\",\n                            \"description\": \"Alphabet Inc.\"\n                          },\n                          {\n                            \"const\": \"Samsung\",\n                            \"description\": \"Samsung Electronics\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                },\n                {\n                  \"if\": {\n                    \"properties\": {\n                      \"field\": {\n                        \"const\": \"tech.regulation\"\n                      }\n                    },\n                    \"required\": [\n                      \"field\"\n                    ]\n                  },\n                  \"then\": {\n                    \"properties\": {\n                      \"value\": {\n                        \"oneOf\": [\n                          {\n                            \"const\": \"GDPR\",\n                            \"description\": \"EU data privacy\"\n                          },\n                          {\n                            \"const\": \"FCC\",\n                            \"description\": \"US communications\"\n                          },\n                          {\n                            \"const\": \"CE\",\n                            \"description\": \"European conformity\"\n                          }\n                        ]\n                      }\n                    }\n                  }\n                }\n              ],\n              \"properties\": {\n                \"field\": {\n                  \"oneOf\": [\n                    {\n                      \"const\": \"ec.team\",\n                      \"description\": \"High-level team or track.\"\n                    },\n                    {\n                      \"const\": \"tech.gadget\",\n                      \"description\": \"Category of hardware.\"\n                    },\n                    {\n                      \"const\": \"tech.software\",\n                      \"description\": \"Software type.\"\n                    },\n                    {\n                      \"const\": \"tech.news\",\n                      \"description\": \"News cadence.\"\n                    },\n                    {\n                      \"const\": \"tech.trend\",\n                      \"description\": \"Current tech trend.\"\n                    },\n                    {\n                      \"const\": \"tech.market\",\n                      \"description\": \"Market status.\"\n                    },\n                    {\n                      \"const\": \"tech.company\",\n                      \"description\": \"Key players.\"\n                    },\n                    {\n                      \"const\": \"tech.regulation\",\n                      \"description\": \"Applicable regulations.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"operator\": {\n                  \"$comment\": \"Extend this oneOf with a const and description for each new operator.\",\n                  \"oneOf\": [\n                    {\n                      \"const\": \"in\",\n                      \"description\": \"Field must be contained in a small set of values.\"\n                    },\n                    {\n                      \"const\": \"equals\",\n                      \"description\": \"Field must exactly equal the provided value.\"\n                    }\n                  ],\n                  \"type\": \"string\"\n                },\n                \"value\": {\n                  \"description\": \"Expected value for the selected field.\",\n                  \"type\": \"string\"\n                }\n              },\n              \"required\": [\n                \"field\",\n                \"value\",\n                \"operator\"\n              ],\n              \"title\": \"Condition\",\n              \"type\": \"object\"\n            },\n            \"minItems\": 1,\n            \"type\": \"array\"\n          },\n          \"description\": {\n            \"description\": \"Explanation of what this funnel step is selecting.\",\n            \"type\": \"string\"\n          },\n          \"name\": {\n            \"description\": \"Human-readable label for this step of the funnel.\",\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\",\n          \"conditions\",\n          \"description\"\n        ],\n        \"title\": \"FunnelStep\",\n        \"type\": \"object\"\n      },\n      \"minItems\": 1,\n      \"type\": \"array\"\n    },\n    \"timeframe\": {\n      \"$comment\": \"Business rule: timeframe.end must be greater than or equal to timeframe.start. This rule is enforced by the application or validation engine.\",\n      \"additionalProperties\": false,\n      \"description\": \"Global date window applied to all steps of the funnel.\",\n      \"properties\": {\n        \"end\": {\n          \"description\": \"End date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        },\n        \"start\": {\n          \"description\": \"Start date of the global interval.\",\n          \"format\": \"date\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"end\",\n        \"start\"\n      ],\n      \"title\": \"Timeframe\",\n      \"type\": \"object\"\n    }\n  },\n  \"required\": [\n    \"prompt\",\n    \"steps\",\n    \"timeframe\"\n  ],\n  \"title\": \"technology funnel definition\",\n  \"type\": \"object\"\n}\n[/SCHEMA]\n\n[QUERY]\nWhich teams are focusing on the Build phase for AI gadgets? between November 25 and December 7 2025\n[/QUERY]\n\n[CURRENT_DATE]\n2025-12-30 00:00:00\n[/CURRENT_DATE]\n\n[OUTPUT]\n", "parsed": false, "parse_error": "Expecting ',' delimiter: line 33 column 6 (char 785)"}
